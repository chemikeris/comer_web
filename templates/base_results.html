{% extends 'base.html' %}
{% block content %}
<div class="row">
<div id="results_nav" class="col-auto col-12 col-xl-2 bg-light">
<nav>
	<button class="btn dropdown-toggle navbar-toggler" data-bs-toggle="collapse" data-bs-target="#current_job_menu">Job: {{ job.name }}</button>
	<div id="current_job_menu" class="navbar-collapse collapse show">
	<ul class="nav-pills list-unstyled" id="current_job_results_menu">
        <li class="nav-item"><a  class="{% if sequence_no != None %}link-dark {% endif %}nav-link dropdown-item{% if active == 'summary' %} active bg-secondary{% endif %}" href="{% url 'results_summary' job_id=job.name %}">Summary</a></li>
        <li class="nav-item"><a class="nav-link link-dark{% if active == 'not_finished' %} disabled{% endif %}" href="{% url 'api_results_zip' job_id=job.name %}">Download</a></li>
        <br>
		{% for s in sequences %}
			{% if forloop.counter0 == sequence_no %}
				<li class="nav-item"><a class="nav-link dropdown-toggle text-truncate" href="#">{{ s }}</a>
					<ul class="nav nav-pills small" data-bs-parent="current_job_results_menu">
                        <li class="nav-item dropdown-item"><a class="nav-link {% if active == 'detailed' %} active{% endif %}" href="{% url 'detailed' job_id=job.name sequence_no=forloop.counter0 %}">Results</a></li>
						<li class="nav-item dropdown-item"><a class="nav-link {% if active == 'query_summary' %} active{% endif %}" href="{% url 'detailed_summary' job_id=job.name sequence_no=forloop.counter0 %}">Summary</a></li>
                        {% if structure_models %}
                        <li class="nav-item dropdown-item bg-transparent"><a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#sequence{{sequence_no}}_models">Structure modeling</a>
                            <ul id="sequence{{sequence_no}}_models" class="collapse{% if active == 'structure_model' %} show{% endif %}">
                            {% for structure_model in structure_models %}
                            <li class="nav-item dropdown-item"><a class="nav-link{% if structure_model.name == modeling_job.name %} active{% endif %}" href="{% url 'show_modeling_job' search_job_id=job.name modeling_job_id=structure_model.name %}">{{ structure_model.name }}</a></li>
                            {% endfor %}
                            </ul>
                        </li>
                        {% endif %}
                        {% if generated_msas %}
                        <li class="nav-item dropdown-item bg-transparent"><a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#sequence{{sequence_no}}_msas">Generated MSAs</a>
                            <ul id="sequence{{sequence_no}}_msas" class="collapse {% if active == 'msa' %} show{% endif %}">
                            {% for msa_job in generated_msas %}
                            <li class="nav-item dropdown-item"><a class="nav-link{% if msa_job.name == msa_job_id %} active{% endif %}" href="{% url 'show_msa' msa_job_id=msa_job.name %}">{{ msa_job.name }}</a></li>
                            {% endfor %}
                            </ul>
                        </li>
                        {% endif %}
                        <li class="nav-item dropdown-item bg-transparent"><a href="#" class="nav-link dropdown-toggle" data-bs-toggle="collapse" data-bs-target="#sequence{{ sequence_no }}_downloads">Download</a>
                            <ul id="sequence{{ sequence_no }}_downloads" class="collapse">
                            <li class="nav-item dropdown-item"><a class="nav-link" href="{% url 'api_detailed_input' job_id=job.name sequence_no=sequence_no %}">Input {{ input_description }}</a></li>
                            {% if has_msa %}<li class="nav-item dropdown-item"><a class="nav-link" href="{% url 'api_detailed_msa' job_id=job.name sequence_no=sequence_no %}">Resulting MSA</a></li>{% endif %}
                            <li class="nav-item dropdown-item"><a class="nav-link" href="{% url 'api_detailed_profile' job_id=job.name sequence_no=sequence_no %}">{{ job.method|upper }} profile</a></li>
                            <li class="nav-item dropdown-item"><a class="nav-link" href="{% url 'api_detailed_json' job_id=job.name sequence_no=sequence_no %}">Results JSON</a></li>
                            </ul>
                        </li>
					</ul>
				</li>
			{% else %}
				<li class="nav-item"><a class="link-dark nav-link dropdown-toggle text-truncate" href="{% url 'detailed' job_id=job.name sequence_no=forloop.counter0 %}">{{ s }}</a></li>
			{% endif %}
		{% endfor %}
	</ul>
	</div>
</nav>
</div>
<div id="results" class="col">{% block results %}{% endblock %}</div>
</div>
{% endblock %}
